{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="{% static 'queues/css/style.css' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ATTIC TOURS - QUEUE</title>
  </head>
  <body class="custom-body">
    <header class="bg-white py-2 shadow p-3 mb-5 bg-body rounded">
      <div class="mx-auto py-2" style="width: 625px;">
        <img class="img-fluid" src="{% static 'queues/img/attic_logo.png' %}" alt="attic_logo" />
      </div>
    </header>

    <main class="custom-main px-2">
      <div class="row">
        <div class="col-6">
          {% comment %}YouTube{% endcomment %}
          <div class="w-100 border border-3 border-white shadow" style="height: 490px;">
            <iframe class="container-fluid p-0 h-100" id="attic_youtube" src="https://www.youtube.com/embed/videoseries?si=HPb7EwvrSH9t01hw&amp;list=PLnkFhq_pPjMWBu-CFJ8_u5ysXhPfaAySt&amp;loop=1&amp;controls=0&amp;mute=1&amp;autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;" allowfullscreen></iframe>
          </div>
        </div>
        <div class="col-6">
          <div class="row">
            {% comment %}queue number{% endcomment %}

            <div class="col-6">
              {% comment %}japan{% endcomment %}
              <div class="custom-queue-card p-4 border border-3 border-white shadow">
                <div class="custom-queue-title bg-white text-center mb-3 p-1" style="width: 100%;">
                  <span class="fw-bold" style="font-size:25px;">JAPAN VISA</span>
                </div>

                <div class="custom-queue-number bg-white">
                  <p class="text-center fw-bold" id="current_japan_queue_number">0</p>
                </div>

                <div class="custom-queue-window">
                  <p class="fs-2 fw-bold text-center text-white m-0" id="current_japan_window_number"></p>
                </div>
              </div>
            </div>
            <div class="col-6">
              {% comment %}korea / ticket{% endcomment %}

              <div class="custom-queue-card p-4 border border-3 border-white shadow">
                <div class="custom-queue-title bg-white text-center mb-3 p-1" style="width: 100%;">
                  <span class="fw-bold no-wrap" style="font-size:25px;">KOREA VISA</span>
                </div>

                <div class="custom-queue-number bg-white">
                  <p class="text-center fw-bold" id="current_korea_ticket_queue_number">0</p>
                </div>

                <div class="custom-queue-window">
                  <p class="fs-2 fw-bold text-center text-white m-0" id="current_korea_ticket_window_number"></p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              {% comment %}notes for queue{% endcomment %}

              <div class="custom-queue-notes p-0 border border-3 border-white shadow mt-2">
                <p class="fw-bold fs-5 p-1 text-center text-white m-0">PLEASE TAKE A NUMBER AND WAIT FOR YOUR NUMBER TO BE CALLED</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="mt-4">
      <p class="fs-2 text-center p-0">LIKE OUR FB PAGE @ATTIC TOURS SM FAIRVIEW</p>
    </footer>

    <audio src="{% static 'queues/audio/callingsound.mp3' %}" id="calling"></audio>
  </body>
</html>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="{% static 'queues/js/utils.js' %}"></script>
<script>
  const endpoint = "{% url 'queues:japan_korea_ticket_queue' %}"
  const japan_queue_number_dom_id = 'current_japan_queue_number'
  const japan_window_number_dom_id = 'current_japan_window_number'
  const korea_ticket_queue_number_dom_id = 'current_korea_ticket_queue_number'
  const korea_ticket_window_number_dom_id = 'current_korea_ticket_window_number'
  const windows_id = null
  const audio_id = 'calling'
  caller(endpoint)
  // observer params
  /*
      japan_queue_number_dom_id, 
      japan_window_number_dom_id, 
      korea_ticket_queue_number_dom_id,
      korea_ticket_window_number_dom_id,
      windows_id, 
      audio_id
      */
  observer(japan_queue_number_dom_id, japan_window_number_dom_id, korea_ticket_queue_number_dom_id, korea_ticket_window_number_dom_id, windows_id, audio_id)
</script>
